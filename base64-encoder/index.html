<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta content="noindex" name="robots"><title>ekelof.net</title><meta content="width=device-width,initial-scale=1" name="viewport"><link href="/assets/docs.CRkrJ0ox.css" rel="stylesheet"></head><body class><div class="body"><main id="content"><div class="content-wrapper">Method 1:<br>1. Copy image data into clipboard, or press Print Screen<br>2. Press Ctrl+V (page/iframe must be focused):<br><br>Method 2:<br>1. Drag and drop an image onto the canvas (not sure whether this works)<div><canvas height="200" id="my_canvas" style="border:1px solid grey" width="200"></canvas><button id="go" style="display:none">Get string</button> <textarea id="output" style="width:100%"></textarea></div><script type="module">let r={};function L(e){console.log("isCanvasBlank",e);let t=document.createElement("canvas");return t.width=e.width,t.height=e.height,e.toDataURL()===t.toDataURL()}function m(e){console.log("getImgAsString",e);let t=document.getElementById(e);if(L(t))return null;{let e=t.toDataURL("image/png");return e=e.replace("data:image/png;base64,",""),e}}r.CLIPBOARD_CLASS=function(e,t,n){let a=this,o=document.getElementById(e);console.log("CLIPBOARD_CLASS canvas",o);let i=document.getElementById(e).getContext("2d");console.log("CLIPBOARD_CLASS ctx",i),document.addEventListener("paste",(function(e){console.log("paste"),a.paste_auto(e)}),!1),document.addEventListener("dragover",(function(e){e.preventDefault()}),!1),document.addEventListener("drop",(function(e){e.preventDefault();let t=e.dataTransfer.items;for(let e=0;e<t.length;e++)if(-1!==t[e].type.indexOf("image")){let n=t[e].getAsFile(),o=(window.URL||window.webkitURL).createObjectURL(n);a.paste_createImage(o)}})),this.paste_auto=function(e){if(e.clipboardData){let t=e.clipboardData.items;if(!t)return;for(let e=0;e<t.length;e++)if(-1!==t[e].type.indexOf("image")){let n=t[e].getAsFile(),a=(window.URL||window.webkitURL).createObjectURL(n);this.paste_createImage(a)}e.preventDefault()}},this.paste_createImage=function(a){console.log("this.paste_createImage",a);let l=new Image;l.onload=function(){1==t?(o.width=l.width,o.height=l.height):i.clearRect(0,0,o.width,o.height),i.drawImage(l,0,0);const a=m(e);n(a)},l.src=a}};const u="my_canvas";new r.CLIPBOARD_CLASS(u,!0,(function(){console.log("paste_auto finished"),document.getElementById("go").style.display="block"})),document.getElementById("go").addEventListener("click",(function(){const e=m(u);alert(e),document.getElementById("output").innerHTML=e}))</script></div></main></div></body></html>